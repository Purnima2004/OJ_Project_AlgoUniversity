<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Submission Detail</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .header { background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status { padding: 0.5rem 1rem; border-radius: 5px; font-weight: bold; }
        .status.AC { background: #d4edda; color: #155724; }
        .status.WA { background: #f8d7da; color: #721c24; }
        .status.TLE { background: #fff3cd; color: #856404; }
        .status.RE { background: #f8d7da; color: #721c24; }
        .status.CE { background: #f8d7da; color: #721c24; }
        .status.MLE { background: #fff3cd; color: #856404; }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .info-item { background: #f8f9fa; padding: 1rem; border-radius: 5px; }
        .info-label { font-weight: bold; color: #666; }
        .code-section { background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .code-editor { background: #1e1e1e; color: #fff; font-family: monospace; padding: 1rem; border-radius: 5px; white-space: pre-wrap; overflow-x: auto; }
        .results-section { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-case { border: 1px solid #ddd; border-radius: 5px; margin: 1rem 0; overflow: hidden; }
        .test-case-header { background: #f8f9fa; padding: 1rem; border-bottom: 1px solid #ddd; }
        .test-case-content { padding: 1rem; }
        .test-case-status { float: right; }
        .back-btn { background: #667eea; color: white; padding: 0.7rem 1.5rem; border: none; border-radius: 25px; text-decoration: none; display: inline-block; margin-bottom: 1rem; }
        .back-btn:hover { background: #5a6fd8; }
    </style>
</head>
<body>
    <div class="container">
        <a href="{% url 'submissions' %}" class="back-btn">‚Üê Back to Submissions</a>
        
        <div class="header">
            <h1>Submission #{{ submission.id }}</h1>
            <div class="status {{ submission.status }}">{{ submission.get_status_display }}</div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Problem</div>
                    <div>{{ submission.problem.title }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">User</div>
                    <div>{{ submission.user.username }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Language</div>
                    <div>{{ submission.language|title }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Submitted</div>
                    <div>{{ submission.submitted_at|date:"M d, Y H:i" }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Execution Time</div>
                    <div>{{ submission.execution_time|default:"N/A" }}ms</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Memory Used</div>
                    <div>{{ submission.memory_used|default:"N/A" }}KB</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Test Cases</div>
                    <div>{{ submission.test_cases_passed }}/{{ submission.total_test_cases }}</div>
                </div>
            </div>
            {% if submission.error_message %}
            <div style="margin-top: 1rem; padding: 1rem; background: #f8d7da; color: #721c24; border-radius: 5px;">
                <strong>Error:</strong> {{ submission.error_message }}
            </div>
            {% endif %}
        </div>
        
        <div class="code-section">
            <h2>Code</h2>
            <div class="code-editor">{{ submission.code }}</div>
        </div>
        
        <div class="results-section">
            <h2>Test Case Results</h2>
            {% for result in results %}
            <div class="test-case">
                <div class="test-case-header">
                    <strong>Test Case {{ result.test_case.order }}</strong>
                    <span class="test-case-status status {{ result.status }}">{{ result.get_status_display }}</span>
                </div>
                <div class="test-case-content">
                    <div style="margin-bottom: 1rem;">
                        <strong>Input:</strong><br>
                        <pre>{{ result.test_case.input_data }}</pre>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <strong>Expected Output:</strong><br>
                        <pre>{{ result.test_case.expected_output }}</pre>
                    </div>
                    {% if result.actual_output %}
                    <div style="margin-bottom: 1rem;">
                        <strong>Your Output:</strong><br>
                        <pre>{{ result.actual_output }}</pre>
                    </div>
                    {% endif %}
                    {% if result.error_message %}
                    <div style="margin-bottom: 1rem;">
                        <strong>Error:</strong><br>
                        <pre>{{ result.error_message }}</pre>
                    </div>
                    {% endif %}
                    <div style="color: #666;">
                        Execution Time: {{ result.execution_time|default:"N/A" }}ms | 
                        Memory: {{ result.memory_used|default:"N/A" }}KB
                    </div>
                </div>
            </div>
            {% empty %}
            <p>No test case results available.</p>
            {% endfor %}
        </div>
    </div>
</body>
</html> 